{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "argocd": {
    "fileMatch": ["apps/.+\\.yaml$"]
  },
  "packageRules": [
    {
      "matchManagers": ["argocd"],
      "matchPackagePatterns": ["*"],
      "enabled": true
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["apps/.+\\.yaml$"],
      "matchStrings": [
        "repoURL:\\s*(?<registryUrl>ghcr\\.io/[^\\s]+)\\s+chart:\\s*(?<depName>[^\\s]+)\\s+targetRevision:\\s*(?<currentValue>[^\\s]+)"
      ],
      "datasourceTemplate": "docker",
      "packageNameTemplate": "{{{registryUrl}}}/{{{depName}}}"
    }
  ]
}
